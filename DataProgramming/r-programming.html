<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 R Programming | Data Programming</title>
  <meta name="description" content="This book is prepared for training data scientists to do data programming or programming targeting data collection, production, curation, visualizatio and modeling. The first part will be focused on general programming grammar and principles. The following three sections will be on R, Python and JavaScript. Future developments may include other langauges (e.g. Ruby,Julia) or technologies (e.g. MapReduce, RHIPE). Samples programs will be provided. Version control information: R 3.6, RStudio 1.2.1114, Python 3.7, Anaconda 1.9.7" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 R Programming | Data Programming" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book is prepared for training data scientists to do data programming or programming targeting data collection, production, curation, visualizatio and modeling. The first part will be focused on general programming grammar and principles. The following three sections will be on R, Python and JavaScript. Future developments may include other langauges (e.g. Ruby,Julia) or technologies (e.g. MapReduce, RHIPE). Samples programs will be provided. Version control information: R 3.6, RStudio 1.2.1114, Python 3.7, Anaconda 1.9.7" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 R Programming | Data Programming" />
  
  <meta name="twitter:description" content="This book is prepared for training data scientists to do data programming or programming targeting data collection, production, curation, visualizatio and modeling. The first part will be focused on general programming grammar and principles. The following three sections will be on R, Python and JavaScript. Future developments may include other langauges (e.g. Ruby,Julia) or technologies (e.g. MapReduce, RHIPE). Samples programs will be provided. Version control information: R 3.6, RStudio 1.2.1114, Python 3.7, Anaconda 1.9.7" />
  

<meta name="author" content="Karl Ho" />


<meta name="date" content="2022-02-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="python-programming.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#principles-of-programming"><i class="fa fa-check"></i><b>2.1</b> Principles of Programming</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#functionalities-of-data-programs"><i class="fa fa-check"></i><b>2.2</b> Functionalities of Data Programs</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-programming.html"><a href="r-programming.html"><i class="fa fa-check"></i><b>3</b> R Programming</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-programming.html"><a href="r-programming.html#what-is-r"><i class="fa fa-check"></i><b>3.1</b> What is R?</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="r-programming.html"><a href="r-programming.html#some-history-of-r-and-s"><i class="fa fa-check"></i><b>3.1.1</b> Some history of R and S</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-programming.html"><a href="r-programming.html#it-is"><i class="fa fa-check"></i><b>3.1.2</b> It is:</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-programming.html"><a href="r-programming.html#why-r"><i class="fa fa-check"></i><b>3.2</b> Why R?</a></li>
<li class="chapter" data-level="3.3" data-path="r-programming.html"><a href="r-programming.html#rstudio"><i class="fa fa-check"></i><b>3.3</b> RStudio</a></li>
<li class="chapter" data-level="3.4" data-path="r-programming.html"><a href="r-programming.html#basic-operations-and-object-assignment"><i class="fa fa-check"></i><b>3.4</b> Basic operations and object assignment</a></li>
<li class="chapter" data-level="3.5" data-path="r-programming.html"><a href="r-programming.html#illustration"><i class="fa fa-check"></i><b>3.5</b> Illustration</a></li>
<li class="chapter" data-level="3.6" data-path="r-programming.html"><a href="r-programming.html#exercise"><i class="fa fa-check"></i><b>3.6</b> Exercise</a></li>
<li class="chapter" data-level="3.7" data-path="r-programming.html"><a href="r-programming.html#recommended-r-resources"><i class="fa fa-check"></i><b>3.7</b> Recommended R Resources:</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="python-programming.html"><a href="python-programming.html"><i class="fa fa-check"></i><b>4</b> Python Programming</a>
<ul>
<li class="chapter" data-level="4.1" data-path="python-programming.html"><a href="python-programming.html#what-is-python"><i class="fa fa-check"></i><b>4.1</b> What is Python?</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="python-programming.html"><a href="python-programming.html#why-python"><i class="fa fa-check"></i><b>4.1.1</b> Why Python?</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="python-programming.html"><a href="python-programming.html#python-basic-packges"><i class="fa fa-check"></i><b>4.2</b> Python basic packges:</a></li>
<li class="chapter" data-level="4.3" data-path="python-programming.html"><a href="python-programming.html#python-ide"><i class="fa fa-check"></i><b>4.3</b> Python IDE</a></li>
<li class="chapter" data-level="4.4" data-path="python-programming.html"><a href="python-programming.html#basic-operations-and-object-assignment-1"><i class="fa fa-check"></i><b>4.4</b> Basic operations and object assignment</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="python-programming.html"><a href="python-programming.html#import-libraries"><i class="fa fa-check"></i><b>4.4.1</b> Import libraries</a></li>
<li class="chapter" data-level="4.4.2" data-path="python-programming.html"><a href="python-programming.html#import-data"><i class="fa fa-check"></i><b>4.4.2</b> Import data</a></li>
<li class="chapter" data-level="4.4.3" data-path="python-programming.html"><a href="python-programming.html#simple-plot"><i class="fa fa-check"></i><b>4.4.3</b> Simple plot</a></li>
<li class="chapter" data-level="4.4.4" data-path="python-programming.html"><a href="python-programming.html#visualizing-data"><i class="fa fa-check"></i><b>4.4.4</b> Visualizing data</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="python-programming.html"><a href="python-programming.html#exercise-1"><i class="fa fa-check"></i><b>4.5</b> Exercise</a></li>
<li class="chapter" data-level="4.6" data-path="python-programming.html"><a href="python-programming.html#recommended-python-resources"><i class="fa fa-check"></i><b>4.6</b> Recommended Python Resources:</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="javascript.html"><a href="javascript.html"><i class="fa fa-check"></i><b>5</b> JavaScript</a>
<ul>
<li class="chapter" data-level="5.1" data-path="javascript.html"><a href="javascript.html#what-is-javascript"><i class="fa fa-check"></i><b>5.1</b> What is JavaScript?</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="javascript.html"><a href="javascript.html#javascript-data-types"><i class="fa fa-check"></i><b>5.1.1</b> JavaScript Data Types</a></li>
<li class="chapter" data-level="5.1.2" data-path="javascript.html"><a href="javascript.html#json"><i class="fa fa-check"></i><b>5.1.2</b> JSON</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="javascript.html"><a href="javascript.html#what-is-d3"><i class="fa fa-check"></i><b>5.2</b> What is D3?</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="javascript.html"><a href="javascript.html#d3-and-web-documents"><i class="fa fa-check"></i><b>5.2.1</b> D3 and web documents</a></li>
<li class="chapter" data-level="5.2.2" data-path="javascript.html"><a href="javascript.html#sample-d3-graphics"><i class="fa fa-check"></i><b>5.2.2</b> Sample D3 graphics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="html.html"><a href="html.html"><i class="fa fa-check"></i><b>6</b> HTML</a>
<ul>
<li class="chapter" data-level="6.1" data-path="html.html"><a href="html.html#what-is-hypertext"><i class="fa fa-check"></i><b>6.1</b> What is Hypertext?</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="html.html"><a href="html.html#javascript-data-types-1"><i class="fa fa-check"></i><b>6.1.1</b> JavaScript Data Types</a></li>
<li class="chapter" data-level="6.1.2" data-path="html.html"><a href="html.html#json-1"><i class="fa fa-check"></i><b>6.1.2</b> JSON</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="html.html"><a href="html.html#what-is-d3-1"><i class="fa fa-check"></i><b>6.2</b> What is D3?</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="html.html"><a href="html.html#d3-and-web-documents-1"><i class="fa fa-check"></i><b>6.2.1</b> D3 and web documents</a></li>
<li class="chapter" data-level="6.2.2" data-path="html.html"><a href="html.html#sample-d3-graphics-1"><i class="fa fa-check"></i><b>6.2.2</b> Sample D3 graphics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i><b>7</b> Summary</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Programming</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-programming" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> R Programming</h1>
<div id="what-is-r" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> What is R?</h2>
<p>The R statistical programming language is a free, open source package based on the S language developed by John Chambers.</p>
<div id="some-history-of-r-and-s" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Some history of R and S</h3>
<p>S was further developed into R by Robert Gentlemen (Canada) and Ross Ihaka (New Zealand)</p>
<div class="figure"><span style="display:block;" id="fig:Rinventors"></span>
<img src="Rinventors.png" alt="R Inventors" width="100%" />
<p class="caption">
Figure 3.1: R Inventors
</p>
</div>
<p>Source: <a href="https://rss.onlinelibrary.wiley.com/doi/10.1111/j.1740-9713.2018.01169.x">Nick Thieme. 2018. R Generation: 25 years of R</a></p>
</div>
<div id="it-is" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> It is:</h3>
<ul>
<li>Large, probably one of the largest based on the user-written add-ons/procedures</li>
<li>Object-oriented</li>
<li>Interactive</li>
<li>Multiplatform: Windows, Mac, Linux</li>
</ul>
<p>According to John Chambers (2009), six facets of R:</p>
<ol style="list-style-type: decimal">
<li>an interface to computational procedures of many kinds;</li>
<li>interactive, hands-on in real time;</li>
<li>functional in its model of programming;</li>
<li>object-oriented, “everything is an object”;</li>
<li>modular, built from standardized pieces; and,</li>
<li>collaborative, a world-wide, open-source effort.</li>
</ol>
<div class="figure"><span style="display:block;" id="fig:Rdevelopers"></span>
<img src="Rdevelopers.png" alt="Prominent R Developers" width="100%" />
<p class="caption">
Figure 3.2: Prominent R Developers
</p>
</div>
<p>Source: <a href="https://rss.onlinelibrary.wiley.com/doi/10.1111/j.1740-9713.2018.01169.x">Nick Thieme. 2018. R Generation: 25 years of R</a></p>
</div>
</div>
<div id="why-r" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Why R?</h2>
<ul>
<li>A programming platform environment</li>
<li>Allow development of software/packages by users</li>
<li>Currently, the CRAN package repository features over 14,000 available packages (as of May, 2019).</li>
<li>Graphics!!!</li>
<li>Scaleble and Portable</li>
<li>Interface with other platform/langauges (e.g. C++, Python, JavaScript, Stan, SQL)</li>
<li>Comparing R with other software?</li>
</ul>
<div class="figure"><span style="display:block;" id="fig:Rcompare"></span>
<img src="Rcompare.png" alt="R Compared with other statistical programs/platforms" width="100%" />
<p class="caption">
Figure 3.3: R Compared with other statistical programs/platforms
</p>
</div>
<p>Source: Oscar Torres-Reyna. 2010. <a href="https://dss.princeton.edu/training/RStata.pdf">Getting Started in R~Stata Notes on Exploring Data</a></p>
</div>
<div id="rstudio" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> RStudio</h2>
<p>RStudio is a user interface for the statistical programming software R.</p>
<ul>
<li>Object-based environment</li>
<li>Window system</li>
<li>Point and click operations</li>
<li>Coding recommended<br />
</li>
<li>Expansions and development</li>
<li>a multi-functional Integrated Development Environment (IDE)</li>
</ul>
<div class="figure"><span style="display:block;" id="fig:Rstudioscreenshot"></span>
<img src="RStudioscreenshot.png" alt="RStudio screenshot" width="100%" />
<p class="caption">
Figure 3.4: RStudio screenshot
</p>
</div>
</div>
<div id="basic-operations-and-object-assignment" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Basic operations and object assignment</h2>
<p>Arithmetic Operations:</p>
<p>+, -, *, /, ^ are the standard arithmetic operators.</p>
<p>Assignment</p>
<p>To assign a value to a variable use “&lt;-” or “=”:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="r-programming.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Introduction to R sample program </span></span>
<span id="cb1-2"><a href="r-programming.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## file: introR02.R</span></span>
<span id="cb1-3"><a href="r-programming.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Adapted from Venables, W.N., Smith, D.M. and Team, R.C., 2018. An Introduction to R, Version 3.5.1 (2018-07-02)</span></span>
<span id="cb1-4"><a href="r-programming.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="r-programming.html#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="r-programming.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Clear any existing objects </span></span>
<span id="cb1-7"><a href="r-programming.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-8"><a href="r-programming.html#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="r-programming.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate x, y and w to demonstrate linear models and plots.</span></span>
<span id="cb1-10"><a href="r-programming.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make x = (1,2,...,20).</span></span>
<span id="cb1-11"><a href="r-programming.html#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="r-programming.html#cb1-12" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span>
<span id="cb1-13"><a href="r-programming.html#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="r-programming.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create A ‘weight’ vector of standard deviations.</span></span>
<span id="cb1-15"><a href="r-programming.html#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="r-programming.html#cb1-16" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="sc">+</span> <span class="fu">sqrt</span>(x)<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb1-17"><a href="r-programming.html#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="r-programming.html#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame of two columns, x and y.</span></span>
<span id="cb1-19"><a href="r-programming.html#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="r-programming.html#cb1-20" aria-hidden="true" tabindex="-1"></a>dummy <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span> x <span class="sc">+</span> <span class="fu">rnorm</span>(x)<span class="sc">*</span>w)</span>
<span id="cb1-21"><a href="r-programming.html#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="r-programming.html#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a simple linear regression </span></span>
<span id="cb1-23"><a href="r-programming.html#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># With y to the left of the tilde then x, meaning y being dependent on x.</span></span>
<span id="cb1-24"><a href="r-programming.html#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Unlike other statistical packages, R does not display all output.  It is recommended</span></span>
<span id="cb1-25"><a href="r-programming.html#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># to create an object to store the estimates.</span></span>
<span id="cb1-26"><a href="r-programming.html#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="r-programming.html#cb1-27" aria-hidden="true" tabindex="-1"></a>fm <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data=</span>dummy) </span>
<span id="cb1-28"><a href="r-programming.html#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="r-programming.html#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summary of the output of model fm.</span></span>
<span id="cb1-30"><a href="r-programming.html#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="r-programming.html#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ x, data = dummy)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.0958 -2.3579 -0.1242  1.4008  5.4649 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   0.2272     1.2520   0.181    0.858    
## x             0.7660     0.1045   7.329 8.34e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.695 on 18 degrees of freedom
## Multiple R-squared:  0.749,  Adjusted R-squared:  0.7351 
## F-statistic: 53.71 on 1 and 18 DF,  p-value: 8.337e-07</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="r-programming.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use w for a weighted regression.</span></span>
<span id="cb3-2"><a href="r-programming.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="r-programming.html#cb3-3" aria-hidden="true" tabindex="-1"></a>fm1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x, <span class="at">data=</span>dummy, <span class="at">weight=</span><span class="dv">1</span><span class="sc">/</span>w<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb3-4"><a href="r-programming.html#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="r-programming.html#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summary of the output of model fm1.</span></span>
<span id="cb3-6"><a href="r-programming.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="r-programming.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fm1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ x, data = dummy, weights = 1/w^2)
## 
## Weighted Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.78814 -0.81695 -0.05702  0.68900  2.27589 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  0.10794    0.96591   0.112    0.912    
## x            0.77720    0.09849   7.891 2.98e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.067 on 18 degrees of freedom
## Multiple R-squared:  0.7758, Adjusted R-squared:  0.7633 
## F-statistic: 62.27 on 1 and 18 DF,  p-value: 2.977e-07</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="r-programming.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the columns in the data frame visible as variables.</span></span>
<span id="cb5-2"><a href="r-programming.html#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="r-programming.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(dummy)</span>
<span id="cb5-4"><a href="r-programming.html#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="r-programming.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a nonparametric local regression function. </span></span>
<span id="cb5-6"><a href="r-programming.html#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="r-programming.html#cb5-7" aria-hidden="true" tabindex="-1"></a>lrf <span class="ot">&lt;-</span> <span class="fu">lowess</span>(x, y)</span>
<span id="cb5-8"><a href="r-programming.html#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="r-programming.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Standard point plot, with plotting character (pch) as bullet.</span></span>
<span id="cb5-10"><a href="r-programming.html#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="r-programming.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y,<span class="at">pch=</span><span class="dv">20</span>) </span>
<span id="cb5-12"><a href="r-programming.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="r-programming.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in the local regression.</span></span>
<span id="cb5-14"><a href="r-programming.html#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="r-programming.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(x, lrf<span class="sc">$</span>y)</span>
<span id="cb5-16"><a href="r-programming.html#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="r-programming.html#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># The true regression line: (intercept 0, slope 1, with dotted line type )</span></span>
<span id="cb5-18"><a href="r-programming.html#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="r-programming.html#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">lty=</span><span class="dv">3</span>)</span>
<span id="cb5-20"><a href="r-programming.html#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="r-programming.html#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Unweighted regression line.</span></span>
<span id="cb5-22"><a href="r-programming.html#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="r-programming.html#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">coef</span>(fm))</span>
<span id="cb5-24"><a href="r-programming.html#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="r-programming.html#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Weighted regression line.</span></span>
<span id="cb5-26"><a href="r-programming.html#cb5-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-27"><a href="r-programming.html#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="fu">coef</span>(fm1), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="r-programming.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A standard regression diagnostic plot to check for heteroscedasticity. Can you see it?</span></span>
<span id="cb6-2"><a href="r-programming.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="r-programming.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">fitted</span>(fm), <span class="at">pch=</span><span class="dv">20</span>, <span class="fu">resid</span>(fm), <span class="at">xlab=</span><span class="st">&quot;Fitted values&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;Residuals&quot;</span>, <span class="at">main=</span><span class="st">&quot;Residuals vs Fitted&quot;</span>)</span>
<span id="cb6-4"><a href="r-programming.html#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="r-programming.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># How about now?</span></span>
<span id="cb6-6"><a href="r-programming.html#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="r-programming.html#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">0</span>, <span class="at">col=</span><span class="st">&quot;red&quot;</span>)  </span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-1-2.png" width="672" /></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="r-programming.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A normal scores plot to check for skewness, kurtosis and outliers.</span></span>
<span id="cb7-2"><a href="r-programming.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="r-programming.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(<span class="fu">resid</span>(fm), <span class="at">main=</span><span class="st">&quot;Residuals Rankit Plot&quot;</span>, <span class="at">pch=</span><span class="dv">17</span>)</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-1-3.png" width="672" /></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="r-programming.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cleaning up</span></span>
<span id="cb8-2"><a href="r-programming.html#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="r-programming.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code></pre></div>
</div>
<div id="illustration" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Illustration</h2>
<p>In this section, we demonstrate exploring data about Taiwan elections in 2016. The Taiwan Election and Democratization Study (TEDS) is one of the longest and most comprehensive elections studies starting in 2001. TEDS collects data through different modes of surveys including face-to-face interviews, telephone interviews and internet surveys. More detail of TEDS can be found at the National Chengchi University Election Study Center website at <a href="http://teds.nccu.edu.tw/main.php">http://teds.nccu.edu.tw/main.php</a>.</p>
<p><em>Taiwan Election and Democratization Study 2016 data</em></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="r-programming.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the TEDS 2016 data in Stata format using the haven package</span></span>
<span id="cb9-2"><a href="r-programming.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;haven&quot;)</span></span>
<span id="cb9-3"><a href="r-programming.html#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="r-programming.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb9-5"><a href="r-programming.html#cb9-5" aria-hidden="true" tabindex="-1"></a>TEDS_2016 <span class="ot">&lt;-</span> <span class="fu">read_stata</span>(<span class="st">&quot;https://github.com/datageneration/home/blob/master/DataProgramming/data/TEDS_2016.dta?raw=true&quot;</span>)</span>
<span id="cb9-6"><a href="r-programming.html#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="r-programming.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the analyze the Party ID variable </span></span>
<span id="cb9-8"><a href="r-programming.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign label to the values (1=KMT, 2=DPP, 3=NP, 4=PFP, 5=TSU, 6=NPP, 7=&quot;NA&quot;)</span></span>
<span id="cb9-9"><a href="r-programming.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="r-programming.html#cb9-10" aria-hidden="true" tabindex="-1"></a>TEDS_2016<span class="sc">$</span>PartyID <span class="ot">&lt;-</span> <span class="fu">factor</span>(TEDS_2016<span class="sc">$</span>PartyID, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;KMT&quot;</span>,<span class="st">&quot;DPP&quot;</span>,<span class="st">&quot;NP&quot;</span>,<span class="st">&quot;PFP&quot;</span>, <span class="st">&quot;TSU&quot;</span>, <span class="st">&quot;NPP&quot;</span>,<span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<p>Take a look at the variable:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="r-programming.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the variable</span></span>
<span id="cb10-2"><a href="r-programming.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(TEDS_2016)</span>
<span id="cb10-3"><a href="r-programming.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(PartyID)</span></code></pre></div>
<pre><code>## [1] NA  NA  KMT NA  NA  DPP
## Levels: KMT DPP NP PFP TSU NPP NA</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="r-programming.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(PartyID)</span></code></pre></div>
<pre><code>## [1] NA  NA  DPP NA  NA  NA 
## Levels: KMT DPP NP PFP TSU NPP NA</code></pre>
<p>Frequency table:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="r-programming.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a frequency table of the Party ID variable using the descr package</span></span>
<span id="cb14-2"><a href="r-programming.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;descr&quot;)</span></span>
<span id="cb14-3"><a href="r-programming.html#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(descr)</span>
<span id="cb14-4"><a href="r-programming.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">freq</span>(TEDS_2016<span class="sc">$</span>PartyID)</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre><code>## TEDS_2016$PartyID 
##       Frequency  Percent
## KMT         388  22.9586
## DPP         591  34.9704
## NP            3   0.1775
## PFP          32   1.8935
## TSU           5   0.2959
## NPP          43   2.5444
## NA          628  37.1598
## Total      1690 100.0000</code></pre>
<p>Get a better chart of the Party ID variable:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="r-programming.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the Party ID variable</span></span>
<span id="cb16-2"><a href="r-programming.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-3"><a href="r-programming.html#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(TEDS_2016, <span class="fu">aes</span>(PartyID)) <span class="sc">+</span> </span>
<span id="cb16-4"><a href="r-programming.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>We can attend to more detail of the chart, such as adding labels to x and y axes, and calculating the percentage instead of counts.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="r-programming.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(TEDS_2016, <span class="fu">aes</span>(PartyID)) <span class="sc">+</span> </span>
<span id="cb17-2"><a href="r-programming.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..))) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="r-programming.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb17-4"><a href="r-programming.html#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb17-5"><a href="r-programming.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>)</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Adding colors, with another theme:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="r-programming.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(TEDS_2016, <span class="fu">aes</span>(PartyID)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="r-programming.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..),<span class="at">fill=</span>PartyID)) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="r-programming.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb18-4"><a href="r-programming.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-5"><a href="r-programming.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-6"><a href="r-programming.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Hold on, colors are not right!</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="r-programming.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(TEDS_2016, <span class="fu">aes</span>(PartyID)) <span class="sc">+</span> </span>
<span id="cb19-2"><a href="r-programming.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">y =</span> (..count..)<span class="sc">/</span><span class="fu">sum</span>(..count..),<span class="at">fill=</span>PartyID)) <span class="sc">+</span> </span>
<span id="cb19-3"><a href="r-programming.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb19-4"><a href="r-programming.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb19-5"><a href="r-programming.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="r-programming.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb19-7"><a href="r-programming.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;steel blue&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,<span class="st">&quot;khaki1&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;goldenrod&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;grey&quot;</span>))</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>To make the chart more meaningful, we can use a package called tidyverse to manage the data.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="r-programming.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">##install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb20-2"><a href="r-programming.html#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb20-3"><a href="r-programming.html#cb20-3" aria-hidden="true" tabindex="-1"></a>TEDS_2016 <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="r-programming.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(PartyID) <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="r-programming.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">nrow</span>(TEDS_2016)) <span class="ot">-&gt;</span> T2</span>
<span id="cb20-6"><a href="r-programming.html#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(T2, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(PartyID, <span class="sc">-</span>perc),<span class="at">y =</span> perc,<span class="at">fill=</span>PartyID)) <span class="sc">+</span> </span>
<span id="cb20-7"><a href="r-programming.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-8"><a href="r-programming.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="sc">+</span> </span>
<span id="cb20-9"><a href="r-programming.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-10"><a href="r-programming.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb20-11"><a href="r-programming.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;steel blue&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,<span class="st">&quot;khaki1&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;goldenrod&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;grey&quot;</span>))</span></code></pre></div>
<p><img src="DataProgramming_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="exercise" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Exercise</h2>
<p>Analyze the Tondu (統獨）variable using the following procedures:</p>
<ol style="list-style-type: decimal">
<li>Assign label to each category</li>
<li>Run a frequency table using descr</li>
<li>Plot the variable using ggplot2</li>
</ol>
<p>Hint:</p>
<ul>
<li>Prepare the analyze the Tondu variable using these labesl: (“Unification now,”“Status quo, unif. in future,”“Status quo, decide later,”“Status quo forever,” “Status quo, indep. in future,” “Independence now,”“No response”)</li>
<li>Sample codes:</li>
</ul>
<pre><code>TEDS_2016$Tondu&lt;-factor(TEDS_2016$Tondu,labels=c(&quot;Unification now&quot;,&quot;Status quo, unif. in &gt;future&quot;,&quot;Status quo, decide later&quot;,&quot;Status quo forever&quot;, &gt;&quot;Status quo, indep. in future&quot;, &quot;Independence now&quot;,&quot;No &gt;response&quot;))</code></pre>
</div>
<div id="recommended-r-resources" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Recommended R Resources:</h2>
<ul>
<li><a href="http://journal.r-project.org/">The R Journal</a></li>
<li><a href="http://cran.r-project.org/doc/manuals/R-intro.pdf">Introduction to R by W. N. Venables, D. M. Smith and the R Core Team</a></li>
<li><a href="http://www.ats.ucla.edu/stat/r/seminars/intro.htm">Introduction to R Seminar at UCLA</a></li>
<li><a href="https://dss.princeton.edu/training/">Getting Started in Data Analysis using Stata and R by Data and Statistical Services, Princeton University</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="python-programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-RProgramming.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["DataProgramming.pdf", "DataProgramming.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
