<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Visualization | Data Science in Practice</title>
  <meta name="description" content="This course is designed to introduce to students the fundamentals of Data Science with a focus on programming training. The four-day course include lectures focused on the scope and applications of Data Science, followed by modules training students in data programming. There is no prerequisite but the students are expected to bring own device (i.e. PC or Mac computers) and get hands-on in computer programming. Sample programs and instruction materials will be provided and students are recommended to install software ahead of class per instructions. Version control information: R version 4.0.2, RStudio Version 1.3.959" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Visualization | Data Science in Practice" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This course is designed to introduce to students the fundamentals of Data Science with a focus on programming training. The four-day course include lectures focused on the scope and applications of Data Science, followed by modules training students in data programming. There is no prerequisite but the students are expected to bring own device (i.e. PC or Mac computers) and get hands-on in computer programming. Sample programs and instruction materials will be provided and students are recommended to install software ahead of class per instructions. Version control information: R version 4.0.2, RStudio Version 1.3.959" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Visualization | Data Science in Practice" />
  
  <meta name="twitter:description" content="This course is designed to introduce to students the fundamentals of Data Science with a focus on programming training. The four-day course include lectures focused on the scope and applications of Data Science, followed by modules training students in data programming. There is no prerequisite but the students are expected to bring own device (i.e. PC or Mac computers) and get hands-on in computer programming. Sample programs and instruction materials will be provided and students are recommended to install software ahead of class per instructions. Version control information: R version 4.0.2, RStudio Version 1.3.959" />
  

<meta name="author" content="Karl Ho" />


<meta name="date" content="2020-07-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Datacollection.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science in Practice</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#what-is-big-data"><i class="fa fa-check"></i><b>2.2</b> What is big data?</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#illustration-the-story-of-google-flu-trend"><i class="fa fa-check"></i><b>2.3</b> Illustration: The story of Google Flu Trend</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Datacollection.html"><a href="Datacollection.html"><i class="fa fa-check"></i><b>3</b> Data Collection</a><ul>
<li class="chapter" data-level="3.1" data-path="Datacollection.html"><a href="Datacollection.html#data-production-and-collection"><i class="fa fa-check"></i><b>3.1</b> Data Production and Collection</a></li>
<li class="chapter" data-level="3.2" data-path="Datacollection.html"><a href="Datacollection.html#data-collection-showcase-twitter-data"><i class="fa fa-check"></i><b>3.2</b> Data collection showcase: Twitter data</a><ul>
<li class="chapter" data-level="3.2.1" data-path="Datacollection.html"><a href="Datacollection.html#mac"><i class="fa fa-check"></i><b>3.2.1</b> <a name="Mac"></a><strong><em>Mac</em></strong></a></li>
<li class="chapter" data-level="3.2.2" data-path="Datacollection.html"><a href="Datacollection.html#windows"><i class="fa fa-check"></i><b>3.2.2</b> <a name="Windows"></a><strong><em>Windows</em></strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Datavisualization.html"><a href="Datavisualization.html"><i class="fa fa-check"></i><b>4</b> Data Visualization</a><ul>
<li class="chapter" data-level="4.1" data-path="Datavisualization.html"><a href="Datavisualization.html#principles-of-programming"><i class="fa fa-check"></i><b>4.1</b> Principles of Programming</a></li>
<li class="chapter" data-level="4.2" data-path="Datavisualization.html"><a href="Datavisualization.html#functionalities-of-data-programs"><i class="fa fa-check"></i><b>4.2</b> Functionalities of Data Programs</a></li>
<li class="chapter" data-level="4.3" data-path="Datavisualization.html"><a href="Datavisualization.html#data-programming-in-r"><i class="fa fa-check"></i><b>4.3</b> Data programming in R</a></li>
<li class="chapter" data-level="4.4" data-path="Datavisualization.html"><a href="Datavisualization.html#data-visualization-with-r"><i class="fa fa-check"></i><b>4.4</b> Data Visualization with R</a><ul>
<li class="chapter" data-level="4.4.1" data-path="Datavisualization.html"><a href="Datavisualization.html#hands-on-workshop-i-visualize-taiwan-election-data"><i class="fa fa-check"></i><b>4.4.1</b> Hands-on workshop I: Visualize Taiwan election data</a></li>
<li class="chapter" data-level="4.4.2" data-path="Datavisualization.html"><a href="Datavisualization.html#hands-on-workshop-ii-visualize-hans-roslings-famous-gapminder-chart"><i class="fa fa-check"></i><b>4.4.2</b> Hands-on workshop II: Visualize Hans Rosling’s famous gapminder chart</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="Datavisualization.html"><a href="Datavisualization.html#recommended-r-resources"><i class="fa fa-check"></i><b>4.5</b> Recommended R Resources:</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/datageneration/DataScienceinPractice" target="blank">Data generation</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Science in Practice</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="Datavisualization" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Data Visualization</h1>
<p>This chapter starts with basic principles for data programming or coding involving data. Data programming is a practice that works and evolves with data. Data programming or coding allows the user to manage and process data in more effective manner. Programs are designed to be replicated or replicable by user and collaborators. A data program can be developed and updated iteratively and incrementally. In other words, it is building on the culminated works without repeating the steps. It takes debugging, which is the process of identifying problems (bugs) but, in fact, updating the program in different situations or with different inputs when used in different contexts, including the programmer himself or herself working in future times.</p>
<div id="principles-of-programming" class="section level2">
<h2><span class="header-section-number">4.1</span> Principles of Programming</h2>
<p><a href="http://home.bi.no/charlotte.ostergaard/students/CodeAndData.pdf">Social scientists Gentzkow and Shapiro (2014)</a> list out some principles for data programming.</p>
<ol style="list-style-type: decimal">
<li>Automation</li>
</ol>
<ul>
<li>For replicability (future-proof, for the future you)</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Version Control</li>
</ol>
<ul>
<li>Allow evolution and updated edition</li>
<li>Use Git and GitHub</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Directories/Modularity</li>
</ol>
<ul>
<li>Organize by functions and data chunks</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li>Keys</li>
</ol>
<ul>
<li>Index variable (relational)</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>Abstraction</li>
</ol>
<ul>
<li>KISS (Keep in short and simple)</li>
</ul>
<ol start="6" style="list-style-type: decimal">
<li>Documentation</li>
</ol>
<ul>
<li>Comments for communicating to later users</li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Management</li>
</ol>
<ul>
<li>Collaboration ready</li>
</ul>
</div>
<div id="functionalities-of-data-programs" class="section level2">
<h2><span class="header-section-number">4.2</span> Functionalities of Data Programs</h2>
<p>A data program can provide or perform :</p>
<ol style="list-style-type: decimal">
<li>Documentation of data</li>
<li>Importing and exporting data</li>
<li>Management of data</li>
<li>Visualization of data</li>
<li>Data models</li>
</ol>
</div>
<div id="data-programming-in-r" class="section level2">
<h2><span class="header-section-number">4.3</span> Data programming in R</h2>
<p><em>R basics</em></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="Datavisualization.html#cb1-1"></a><span class="co"># Create variables composed of random numbers</span></span>
<span id="cb1-2"><a href="Datavisualization.html#cb1-2"></a>x &lt;-<span class="kw">rnorm</span>(<span class="dv">50</span>) </span>
<span id="cb1-3"><a href="Datavisualization.html#cb1-3"></a>y =<span class="st"> </span><span class="kw">rnorm</span>(x)</span>
<span id="cb1-4"><a href="Datavisualization.html#cb1-4"></a></span>
<span id="cb1-5"><a href="Datavisualization.html#cb1-5"></a><span class="co"># Plot the points in the plane </span></span>
<span id="cb1-6"><a href="Datavisualization.html#cb1-6"></a><span class="kw">plot</span>(x, y)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p><em>Using R packages</em></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="Datavisualization.html#cb2-1"></a><span class="co"># Plot better, using the ggplot2 package </span></span>
<span id="cb2-2"><a href="Datavisualization.html#cb2-2"></a><span class="co">## Prerequisite: install and load the ggplot2 package</span></span>
<span id="cb2-3"><a href="Datavisualization.html#cb2-3"></a><span class="co">## install.packages(&quot;ggplot2&quot;)</span></span>
<span id="cb2-4"><a href="Datavisualization.html#cb2-4"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb2-5"><a href="Datavisualization.html#cb2-5"></a><span class="kw">qplot</span>(x,y)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="data-visualization-with-r" class="section level2">
<h2><span class="header-section-number">4.4</span> Data Visualization with R</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="Datavisualization.html#cb3-1"></a><span class="co"># Plot better better with ggplot2</span></span>
<span id="cb3-2"><a href="Datavisualization.html#cb3-2"></a>x &lt;-<span class="kw">rnorm</span>(<span class="dv">50</span>) </span>
<span id="cb3-3"><a href="Datavisualization.html#cb3-3"></a>y =<span class="st"> </span><span class="kw">rnorm</span>(x)</span>
<span id="cb3-4"><a href="Datavisualization.html#cb3-4"></a><span class="kw">ggplot</span>(,<span class="kw">aes</span>(x,y)) <span class="op">+</span><span class="st"> </span><span class="kw">theme_bw</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div id="hands-on-workshop-i-visualize-taiwan-election-data" class="section level3">
<h3><span class="header-section-number">4.4.1</span> Hands-on workshop I: Visualize Taiwan election data</h3>
<p>In this section, we demonstrate exploring data about Taiwan elections in 2016. The Taiwan Election and Democratization Study (TEDS) is one of the longest and most comprehensive elections studies starting in 2001. TEDS collects data through different modes of surveys including face-to-face interviews, telephone interviews and internet surveys. More detail of TEDS can be found at the National Chengchi University Election Study Center website at <a href="https://esc.nccu.edu.tw/main.php">https://esc.nccu.edu.tw/main.php</a>.</p>
<p><em>Taiwan Election and Democratization Study 2016 data</em></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="Datavisualization.html#cb4-1"></a><span class="co"># Import the TEDS 2016 data in Stata format using the haven package</span></span>
<span id="cb4-2"><a href="Datavisualization.html#cb4-2"></a><span class="co">##install.packages(&quot;haven&quot;)</span></span>
<span id="cb4-3"><a href="Datavisualization.html#cb4-3"></a></span>
<span id="cb4-4"><a href="Datavisualization.html#cb4-4"></a><span class="kw">library</span>(haven)</span>
<span id="cb4-5"><a href="Datavisualization.html#cb4-5"></a>TEDS_<span class="dv">2016</span> &lt;-<span class="st"> </span>haven<span class="op">::</span><span class="kw">read_stata</span>(<span class="st">&quot;https://github.com/datageneration/home/blob/master/DataProgramming/data/TEDS_2016.dta?raw=true&quot;</span>)</span>
<span id="cb4-6"><a href="Datavisualization.html#cb4-6"></a></span>
<span id="cb4-7"><a href="Datavisualization.html#cb4-7"></a><span class="co"># Prepare the analyze the Party ID variable </span></span>
<span id="cb4-8"><a href="Datavisualization.html#cb4-8"></a><span class="co"># Assign label to the values (1=KMT, 2=DPP, 3=NP, 4=PFP, 5=TSU, 6=NPP, 7=&quot;NA&quot;)</span></span>
<span id="cb4-9"><a href="Datavisualization.html#cb4-9"></a></span>
<span id="cb4-10"><a href="Datavisualization.html#cb4-10"></a>TEDS_<span class="dv">2016</span><span class="op">$</span>PartyID &lt;-<span class="st"> </span><span class="kw">factor</span>(TEDS_<span class="dv">2016</span><span class="op">$</span>PartyID, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;KMT&quot;</span>,<span class="st">&quot;DPP&quot;</span>,<span class="st">&quot;NP&quot;</span>,<span class="st">&quot;PFP&quot;</span>, <span class="st">&quot;TSU&quot;</span>, <span class="st">&quot;NPP&quot;</span>,<span class="st">&quot;NA&quot;</span>))</span></code></pre></div>
<p>Take a look at the variable:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="Datavisualization.html#cb5-1"></a><span class="co"># Check the variable</span></span>
<span id="cb5-2"><a href="Datavisualization.html#cb5-2"></a><span class="kw">attach</span>(TEDS_<span class="dv">2016</span>)</span>
<span id="cb5-3"><a href="Datavisualization.html#cb5-3"></a><span class="kw">head</span>(PartyID)</span></code></pre></div>
<pre><code>## [1] NA  NA  KMT NA  NA  DPP
## Levels: KMT DPP NP PFP TSU NPP NA</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="Datavisualization.html#cb7-1"></a><span class="kw">tail</span>(PartyID)</span></code></pre></div>
<pre><code>## [1] NA  NA  DPP NA  NA  NA 
## Levels: KMT DPP NP PFP TSU NPP NA</code></pre>
<p>Frequency table:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="Datavisualization.html#cb9-1"></a><span class="co"># Run a frequency table of the Party ID variable using the descr package</span></span>
<span id="cb9-2"><a href="Datavisualization.html#cb9-2"></a><span class="co">## install.packages(&quot;descr&quot;)</span></span>
<span id="cb9-3"><a href="Datavisualization.html#cb9-3"></a><span class="kw">library</span>(descr)</span>
<span id="cb9-4"><a href="Datavisualization.html#cb9-4"></a><span class="kw">freq</span>(TEDS_<span class="dv">2016</span><span class="op">$</span>PartyID)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre><code>## TEDS_2016$PartyID 
##       Frequency  Percent
## KMT         388  22.9586
## DPP         591  34.9704
## NP            3   0.1775
## PFP          32   1.8935
## TSU           5   0.2959
## NPP          43   2.5444
## NA          628  37.1598
## Total      1690 100.0000</code></pre>
<p>Get a better chart of the Party ID variable:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="Datavisualization.html#cb11-1"></a><span class="co"># Plot the Party ID variable</span></span>
<span id="cb11-2"><a href="Datavisualization.html#cb11-2"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb11-3"><a href="Datavisualization.html#cb11-3"></a><span class="kw">ggplot</span>(TEDS_<span class="dv">2016</span>, <span class="kw">aes</span>(PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb11-4"><a href="Datavisualization.html#cb11-4"></a><span class="st">  </span><span class="kw">geom_bar</span>()</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We can attend to more detail of the chart, such as adding labels to x and y axes, and calculating the percentage instead of counts.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="Datavisualization.html#cb12-1"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(TEDS_<span class="dv">2016</span>, <span class="kw">aes</span>(PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb12-2"><a href="Datavisualization.html#cb12-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">y =</span> (..count..)<span class="op">/</span><span class="kw">sum</span>(..count..))) <span class="op">+</span><span class="st"> </span></span>
<span id="cb12-3"><a href="Datavisualization.html#cb12-3"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>percent) <span class="op">+</span></span>
<span id="cb12-4"><a href="Datavisualization.html#cb12-4"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb12-5"><a href="Datavisualization.html#cb12-5"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Adding colors, with another theme:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="Datavisualization.html#cb13-1"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(TEDS_<span class="dv">2016</span>, <span class="kw">aes</span>(PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb13-2"><a href="Datavisualization.html#cb13-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">y =</span> (..count..)<span class="op">/</span><span class="kw">sum</span>(..count..),<span class="dt">fill=</span>PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb13-3"><a href="Datavisualization.html#cb13-3"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>percent) <span class="op">+</span></span>
<span id="cb13-4"><a href="Datavisualization.html#cb13-4"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb13-5"><a href="Datavisualization.html#cb13-5"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="op">+</span></span>
<span id="cb13-6"><a href="Datavisualization.html#cb13-6"></a><span class="st">  </span><span class="kw">theme_bw</span>()</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Hold on, colors are not right!</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="Datavisualization.html#cb14-1"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(TEDS_<span class="dv">2016</span>, <span class="kw">aes</span>(PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb14-2"><a href="Datavisualization.html#cb14-2"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">y =</span> (..count..)<span class="op">/</span><span class="kw">sum</span>(..count..),<span class="dt">fill=</span>PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb14-3"><a href="Datavisualization.html#cb14-3"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">labels=</span>scales<span class="op">::</span>percent) <span class="op">+</span></span>
<span id="cb14-4"><a href="Datavisualization.html#cb14-4"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb14-5"><a href="Datavisualization.html#cb14-5"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="op">+</span></span>
<span id="cb14-6"><a href="Datavisualization.html#cb14-6"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb14-7"><a href="Datavisualization.html#cb14-7"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;steel blue&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,<span class="st">&quot;khaki1&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;goldenrod&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;grey&quot;</span>))</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>To make the chart more meaningful, we can use a package called tidyverse to manage the data.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="Datavisualization.html#cb15-1"></a><span class="co">##install.packages(&quot;tidyverse&quot;)</span></span>
<span id="cb15-2"><a href="Datavisualization.html#cb15-2"></a><span class="kw">library</span>(tidyverse)</span>
<span id="cb15-3"><a href="Datavisualization.html#cb15-3"></a>TEDS_<span class="dv">2016</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-4"><a href="Datavisualization.html#cb15-4"></a><span class="st">  </span><span class="kw">count</span>(PartyID) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb15-5"><a href="Datavisualization.html#cb15-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">perc =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">nrow</span>(TEDS_<span class="dv">2016</span>)) -&gt;<span class="st"> </span>T2</span>
<span id="cb15-6"><a href="Datavisualization.html#cb15-6"></a>ggplot2<span class="op">::</span><span class="kw">ggplot</span>(T2, <span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(PartyID, <span class="op">-</span>perc),<span class="dt">y =</span> perc,<span class="dt">fill=</span>PartyID)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb15-7"><a href="Datavisualization.html#cb15-7"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="op">+</span></span>
<span id="cb15-8"><a href="Datavisualization.html#cb15-8"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&quot;Party Support (%)&quot;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb15-9"><a href="Datavisualization.html#cb15-9"></a><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Taiwan Political Parties&quot;</span>) <span class="op">+</span></span>
<span id="cb15-10"><a href="Datavisualization.html#cb15-10"></a><span class="st">  </span><span class="kw">theme_bw</span>() <span class="op">+</span></span>
<span id="cb15-11"><a href="Datavisualization.html#cb15-11"></a><span class="st">  </span><span class="kw">scale_fill_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;steel blue&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,<span class="st">&quot;khaki1&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;goldenrod&quot;</span>,<span class="st">&quot;yellow&quot;</span>,<span class="st">&quot;grey&quot;</span>))</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="hands-on-workshop-ii-visualize-hans-roslings-famous-gapminder-chart" class="section level3">
<h3><span class="header-section-number">4.4.2</span> Hands-on workshop II: Visualize Hans Rosling’s famous gapminder chart</h3>
<p>In this section, we replicate Dr. Hans Rosling’s well-renowned animated chart depicting world development over time. For more detail, watch this <a href="https://www.youtube.com/watch?v=Z8t4k0Q8e8Y">BBC video</a>. Data are drawn from <a href="https://www.gapminder.org">Gapfinder</a>, a foundation established by the Rosling family.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="Datavisualization.html#cb16-1"></a>my_packages &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;png&quot;</span>,<span class="st">&quot;gifski&quot;</span>, <span class="st">&quot;gapminder&quot;</span>, <span class="st">&quot;ggplot2&quot;</span>,<span class="st">&quot;gganimate&quot;</span>,<span class="st">&quot;RColorBrewer&quot;</span>)</span>
<span id="cb16-2"><a href="Datavisualization.html#cb16-2"></a><span class="kw">install.packages</span>(my_packages, <span class="dt">repos =</span> <span class="st">&quot;http://cran.rstudio.com&quot;</span>)</span></code></pre></div>
<pre><code>## 
## The downloaded binary packages are in
##  /var/folders/qp/s6y46pq11y13t0gpnf4_v9vm0000gp/T//RtmpEyuibZ/downloaded_packages</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="Datavisualization.html#cb18-1"></a><span class="kw">library</span>(gapminder)</span>
<span id="cb18-2"><a href="Datavisualization.html#cb18-2"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb18-3"><a href="Datavisualization.html#cb18-3"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb18-4"><a href="Datavisualization.html#cb18-4"></a><span class="kw">library</span>(gifski)</span>
<span id="cb18-5"><a href="Datavisualization.html#cb18-5"></a><span class="kw">library</span>(png)</span>
<span id="cb18-6"><a href="Datavisualization.html#cb18-6"></a><span class="kw">library</span>(RColorBrewer)</span>
<span id="cb18-7"><a href="Datavisualization.html#cb18-7"></a></span>
<span id="cb18-8"><a href="Datavisualization.html#cb18-8"></a><span class="kw">data</span>(<span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb18-9"><a href="Datavisualization.html#cb18-9"></a><span class="co"># Basic scatter plot object</span></span>
<span id="cb18-10"><a href="Datavisualization.html#cb18-10"></a></span>
<span id="cb18-11"><a href="Datavisualization.html#cb18-11"></a>mapping &lt;-<span class="st"> </span><span class="kw">aes</span>(<span class="dt">x =</span>gdpPercap, <span class="dt">y =</span> lifeExp, </span>
<span id="cb18-12"><a href="Datavisualization.html#cb18-12"></a>               <span class="dt">size =</span> pop, <span class="dt">color =</span> continent,</span>
<span id="cb18-13"><a href="Datavisualization.html#cb18-13"></a>               <span class="dt">frame =</span> year) </span>
<span id="cb18-14"><a href="Datavisualization.html#cb18-14"></a></span>
<span id="cb18-15"><a href="Datavisualization.html#cb18-15"></a><span class="co"># Note: manual color choices.</span></span>
<span id="cb18-16"><a href="Datavisualization.html#cb18-16"></a></span>
<span id="cb18-17"><a href="Datavisualization.html#cb18-17"></a><span class="kw">ggplot</span>(gapminder, <span class="dt">mapping =</span> mapping) <span class="op">+</span></span>
<span id="cb18-18"><a href="Datavisualization.html#cb18-18"></a><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span></span>
<span id="cb18-19"><a href="Datavisualization.html#cb18-19"></a><span class="st">  </span><span class="kw">theme_linedraw</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb18-20"><a href="Datavisualization.html#cb18-20"></a><span class="st">  </span><span class="kw">scale_x_log10</span>() <span class="op">+</span></span>
<span id="cb18-21"><a href="Datavisualization.html#cb18-21"></a><span class="st">  </span><span class="kw">scale_color_manual</span>(<span class="dt">values=</span><span class="kw">c</span>(<span class="st">&quot;darkviolet&quot;</span>,<span class="st">&quot;darkblue&quot;</span>,<span class="st">&quot;firebrick1&quot;</span>,<span class="st">&quot;forestgreen&quot;</span>,<span class="st">&quot;deepskyblue1&quot;</span>)) <span class="op">+</span></span>
<span id="cb18-22"><a href="Datavisualization.html#cb18-22"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&#39;Year: {frame_time}&#39;</span>, <span class="dt">x =</span> <span class="st">&#39;GDP per capita&#39;</span>, <span class="dt">y =</span> <span class="st">&#39;life expectancy&#39;</span>) <span class="op">+</span></span>
<span id="cb18-23"><a href="Datavisualization.html#cb18-23"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="kw">aes</span>(<span class="dt">label=</span><span class="kw">ifelse</span>((country <span class="op">==</span><span class="st"> &quot;China&quot;</span>), <span class="st">&quot;China&quot;</span>, <span class="kw">ifelse</span>(country<span class="op">==</span><span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;&quot;</span>))),<span class="dt">vjust=</span><span class="dv">0</span>,<span class="dt">nudge_y =</span> <span class="dv">1</span>,<span class="dt">size=</span><span class="dv">6</span>) <span class="op">+</span></span>
<span id="cb18-24"><a href="Datavisualization.html#cb18-24"></a><span class="st">  </span><span class="kw">transition_time</span>(year) <span class="op">+</span></span>
<span id="cb18-25"><a href="Datavisualization.html#cb18-25"></a><span class="st">  </span><span class="kw">ease_aes</span>(<span class="st">&#39;linear&#39;</span>)</span></code></pre></div>
<p><img src="..Rmd_files/figure-html/unnamed-chunk-12-1.gif" /><!-- --></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="Datavisualization.html#cb19-1"></a><span class="co">## Exercise</span></span>
<span id="cb19-2"><a href="Datavisualization.html#cb19-2"></a><span class="co"># 1. Check the variables in gapminder</span></span>
<span id="cb19-3"><a href="Datavisualization.html#cb19-3"></a><span class="co"># 2. Change the variable gdpPercap to size and pop to x</span></span>
<span id="cb19-4"><a href="Datavisualization.html#cb19-4"></a><span class="co"># 3. Change the color palette using [RColorBrewer](https://www.nceas.ucsb.edu/sites/default/files/2020-04/colorPaletteCheatsheet.pdf)</span></span></code></pre></div>
</div>
</div>
<div id="recommended-r-resources" class="section level2">
<h2><span class="header-section-number">4.5</span> Recommended R Resources:</h2>
<ul>
<li><a href="http://journal.r-project.org/">The R Journal</a></li>
<li><a href="http://cran.r-project.org/doc/manuals/R-intro.pdf">Introduction to R by W. N. Venables, D. M. Smith and the R Core Team</a></li>
<li><a href="http://www.ats.ucla.edu/stat/r/seminars/intro.htm">Introduction to R Seminar at UCLA</a></li>
<li><a href="https://dss.princeton.edu/training/">Getting Started in Data Analysis using Stata and R by Data and Statistical Services, Princeton University</a></li>
</ul>

<p>More about this website.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Datacollection.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["..pdf", "..epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
